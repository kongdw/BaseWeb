<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="k0n9.module.archive.dao.ArchiveMapper">

    <cache/>

    <sql id="selectColumns">
        id,
        title,
        type_id as type.id,
        category_id as category.id,
        deadline_id as deadline.id,
        doc_class_id as docClass.id,
        year,
        doc_no,
        doc_date,
        forcer_no,
        box_no,
        fonds_no,
        part_num,
        page_num,
        responsible,
        dept,
        privacy_level_id as privacyLevel.id,
        urgent_level_id as urgentLevel.id,
        remark,
    </sql>

    <sql id="Join">
    </sql>

    <select id="fetch" resultType="Archive">
        SELECT
        <include refid="selectColumns"/>
        FROM ams_archive
        WHERE id = #{id}
    </select>

    <select id="findPage" resultType="Archive">
        SELECT
        <include refid="selectColumns"/>
        FROM ams_archive
        ORDER BY id DESC
    </select>

    <select id="findByIds" resultType="Archive">
        SELECT
        <include refid="selectColumns"/>
        FROM ams_archive r
        WHERE id in
        <foreach collection="array" item="id" open="(" separator="," close=")">
            #{id}
        </foreach>
        ORDER BY id DESC
    </select>

    <insert id="insert" useGeneratedKeys="true" keyProperty="id" parameterType="Archive">
		INSERT INTO ams_archive (
            title,
            type_id,
            category_id,
            deadline_id,
            doc_class_id,
            year,
            doc_no,
            doc_date,
            forcer_no,
            box_no,
            fonds_no,
            part_num,
            page_num,
            responsible,
            dept,
            privacy_level_id,
            urgent_level_id,
            remark
		) VALUES (
		    #{title},
            #{type.id},
            #{category.id},
            #{deadline.id},
            #{docClass.id},
            #{year},
            #{doc_no},
            #{doc_date},
            #{forcer_no},
            #{box_no},
            #{fonds_no},
            #{part_num},
            #{page_num},
            #{responsible},
            #{dept},
            #{privacyLevel.id},
            #{urgentLevel.id},
            #{remark}
		)
	</insert>

    <update id="update" parameterType="Archive">
		UPDATE ams_archive SET
		    title=#{title},
            type_id=#{type.id},
            category_id=#{category.id},
            deadline_id=#{deadline.id},
            doc_class_id=#{docClass.id},
            year=#{year},
            doc_no=#{doc_no},
            doc_date=#{doc_date},
            forcer_no=#{forcer_no},
            box_no=#{box_no},
            fonds_no=#{fonds_no},
            part_num=#{part_num},
            page_num=#{page_num},
            responsible=#{responsible},
            dept=#{dept},
            privacy_level_id=#{privacyLevel.id},
            urgent_level_id=#{urgentLevel.id},
            remark= #{remark}
		  WHERE id = #{id}
	</update>

    <delete id="delete">
        DELETE FROM ams_archive WHERE id=#{id}
    </delete>

    <delete id="deleteByIds">
        DELETE FROM ams_archive WHERE id in
        <foreach collection="array" index="i" item="id" open="(" separator="," close=")">
            #{id}
        </foreach>
    </delete>
</mapper>